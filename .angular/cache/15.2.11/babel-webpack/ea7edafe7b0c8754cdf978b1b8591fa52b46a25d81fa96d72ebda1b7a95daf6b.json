{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/auth.service\";\nimport * as i2 from \"@angular/router\";\nexport class OtpVerificationComponent {\n  constructor(authService, router) {\n    this.authService = authService;\n    this.router = router;\n    this.email = '';\n    this.otp = '';\n    this.timer = 60;\n    this.isResendDisabled = true;\n    const navigation = this.router.getCurrentNavigation();\n    const state = navigation?.extras.state;\n    this.email = state?.email || '';\n    this.startTimer();\n  }\n  onSubmit() {\n    this.authService.verifyOtp(this.email, this.otp).subscribe(response => {\n      console.log('OTP verification successful', response);\n      this.router.navigate(['/login']);\n    }, error => {\n      console.error('OTP verification failed', error);\n    });\n  }\n  onResendOtp() {\n    this.authService.resendOtp(this.email).subscribe(response => {\n      console.log('OTP resent successfully', response);\n      this.startTimer();\n    }, error => {\n      console.error('Failed to resend OTP', error);\n    });\n  }\n  startTimer() {\n    this.timer = 60;\n    this.isResendDisabled = true;\n    const interval = setInterval(() => {\n      this.timer--;\n      if (this.timer <= 0) {\n        clearInterval(interval);\n        this.isResendDisabled = false;\n      }\n    }, 1000);\n  }\n  static {\n    this.ɵfac = function OtpVerificationComponent_Factory(t) {\n      return new (t || OtpVerificationComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: OtpVerificationComponent,\n      selectors: [[\"app-otp-verification\"]],\n      decls: 2,\n      vars: 0,\n      template: function OtpVerificationComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"p\");\n          i0.ɵɵtext(1, \"otp-verification works!\");\n          i0.ɵɵelementEnd();\n        }\n      },\n      styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"mappings":";;;AASA,OAAM,MAAOA,wBAAwB;EAMnCC,YAAoBC,WAAwB,EAAUC,MAAc;IAAhD,gBAAW,GAAXD,WAAW;IAAuB,WAAM,GAANC,MAAM;IAL5D,UAAK,GAAW,EAAE;IAClB,QAAG,GAAW,EAAE;IAChB,UAAK,GAAW,EAAE;IAClB,qBAAgB,GAAY,IAAI;IAG9B,MAAMC,UAAU,GAAG,IAAI,CAACD,MAAM,CAACE,oBAAoB,EAAE;IACrD,MAAMC,KAAK,GAAGF,UAAU,EAAEG,MAAM,CAACD,KAA0B;IAC3D,IAAI,CAACE,KAAK,GAAGF,KAAK,EAAEE,KAAK,IAAI,EAAE;IAC/B,IAAI,CAACC,UAAU,EAAE;EACnB;EAEAC,QAAQ;IACN,IAAI,CAACR,WAAW,CAACS,SAAS,CAAC,IAAI,CAACH,KAAK,EAAE,IAAI,CAACI,GAAG,CAAC,CAACC,SAAS,CACvDC,QAAQ,IAAI;MACXC,OAAO,CAACC,GAAG,CAAC,6BAA6B,EAAEF,QAAQ,CAAC;MACpD,IAAI,CAACX,MAAM,CAACc,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;IAClC,CAAC,EACAC,KAAK,IAAI;MACRH,OAAO,CAACG,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;IACjD,CAAC,CACF;EACH;EAEAC,WAAW;IACT,IAAI,CAACjB,WAAW,CAACkB,SAAS,CAAC,IAAI,CAACZ,KAAK,CAAC,CAACK,SAAS,CAC7CC,QAAQ,IAAI;MACXC,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEF,QAAQ,CAAC;MAChD,IAAI,CAACL,UAAU,EAAE;IACnB,CAAC,EACAS,KAAK,IAAI;MACRH,OAAO,CAACG,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAC9C,CAAC,CACF;EACH;EAEAT,UAAU;IACR,IAAI,CAACY,KAAK,GAAG,EAAE;IACf,IAAI,CAACC,gBAAgB,GAAG,IAAI;IAC5B,MAAMC,QAAQ,GAAGC,WAAW,CAAC,MAAK;MAChC,IAAI,CAACH,KAAK,EAAE;MACZ,IAAI,IAAI,CAACA,KAAK,IAAI,CAAC,EAAE;QACnBI,aAAa,CAACF,QAAQ,CAAC;QACvB,IAAI,CAACD,gBAAgB,GAAG,KAAK;;IAEjC,CAAC,EAAE,IAAI,CAAC;EACV;;;uBA/CWtB,wBAAwB;IAAA;EAAA;;;YAAxBA,wBAAwB;MAAA0B;MAAAC;MAAAC;MAAAC;QAAA;UCTrCC,yBAAG;UAAAA,uCAAuB;UAAAA,iBAAI","names":["OtpVerificationComponent","constructor","authService","router","navigation","getCurrentNavigation","state","extras","email","startTimer","onSubmit","verifyOtp","otp","subscribe","response","console","log","navigate","error","onResendOtp","resendOtp","timer","isResendDisabled","interval","setInterval","clearInterval","selectors","decls","vars","template","i0"],"sourceRoot":"","sources":["C:\\Isaiah\\Business\\Neptune-Microfinance-Bank\\order-processing-system-app\\src\\app\\otp-verification\\otp-verification.component.ts","C:\\Isaiah\\Business\\Neptune-Microfinance-Bank\\order-processing-system-app\\src\\app\\otp-verification\\otp-verification.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AuthService } from '../services/auth.service';\n\n@Component({\n  selector: 'app-otp-verification',\n  templateUrl: './otp-verification.component.html',\n  styleUrls: ['./otp-verification.component.css'],\n})\nexport class OtpVerificationComponent {\n  email: string = '';\n  otp: string = '';\n  timer: number = 60;\n  isResendDisabled: boolean = true;\n\n  constructor(private authService: AuthService, private router: Router) {\n    const navigation = this.router.getCurrentNavigation();\n    const state = navigation?.extras.state as { email: string };\n    this.email = state?.email || '';\n    this.startTimer();\n  }\n\n  onSubmit(): void {\n    this.authService.verifyOtp(this.email, this.otp).subscribe(\n      (response) => {\n        console.log('OTP verification successful', response);\n        this.router.navigate(['/login']);\n      },\n      (error) => {\n        console.error('OTP verification failed', error);\n      }\n    );\n  }\n\n  onResendOtp(): void {\n    this.authService.resendOtp(this.email).subscribe(\n      (response) => {\n        console.log('OTP resent successfully', response);\n        this.startTimer();\n      },\n      (error) => {\n        console.error('Failed to resend OTP', error);\n      }\n    );\n  }\n\n  startTimer(): void {\n    this.timer = 60;\n    this.isResendDisabled = true;\n    const interval = setInterval(() => {\n      this.timer--;\n      if (this.timer <= 0) {\n        clearInterval(interval);\n        this.isResendDisabled = false;\n      }\n    }, 1000);\n  }\n}","<p>otp-verification works!</p>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}